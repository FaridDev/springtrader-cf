allprojects {
    group = 'org.springframework.nanotrader'
    description = 'springtrader-cf'
    apply plugin: 'java'
    apply plugin: 'maven'
    version = '2.0'

    repositories {
        mavenLocal()
        mavenCentral()
        maven {
            url "http://repo.spring.io/gemstone-release-cache"
        }
    }

    ext.springVersion = '4.2.6.RELEASE'
    ext.springSecurityVersion = '4.1.0.RELEASE'
    ext.springCloudVersion = '1.1.1.RELEASE'
    ext.amqpVersion = '4.2.5.RELEASE'

    dependencies {
        testCompile "org.mockito:mockito-core:1.10.19"
        testCompile "org.springframework:spring-test:$springVersion"
        testCompile "junit:junit:4.12"
        testCompile "org.hamcrest:hamcrest-all:1.3"
    }
}

project('spring-nanotrader-service-support') {
    description = 'Spring Nanotrader Data Service Support'

    dependencies {
        testCompile project(':spring-nanotrader-data').sourceSets.test.output
        compile project(":spring-nanotrader-data")
        compile "net.sf.dozer:dozer:5.3.2"
        compile "org.springframework.data:spring-data-gemfire:1.7.4.RELEASE"
    }
}

project('spring-nanotrader-data') {
    description = 'Spring Nanotrader Data'

    dependencies {
        compile "org.springframework.cloud:spring-cloud-starter-eureka:1.0.6.RELEASE"
        compile "org.springframework.cloud:spring-cloud-starter-hystrix:1.0.6.RELEASE"
        compile "org.springframework.cloud:spring-cloud-starter-feign:1.0.6.RELEASE"
        compile "com.netflix.feign:feign-gson:8.5.0"
        compile "com.google.code.gson:gson:2.3.1"
        compile "com.jayway.jsonpath:json-path:2.2.0"
    }
}

project('spring-nanotrader-services') {
    apply plugin: 'war'
    description = 'Spring Nanotrader Services'

    dependencies {
        testCompile project(':spring-nanotrader-data').sourceSets.test.output
        compile project(":spring-nanotrader-service-support")
        compile "org.springframework.cloud:spring-cloud-spring-service-connector:$springCloudVersion"
        compile "org.springframework.cloud:spring-cloud-cloudfoundry-connector:$springCloudVersion"
        compile "org.springframework.integration:spring-integration-amqp:$amqpVersion"
        compile "org.springframework.security:spring-security-web:$springSecurityVersion"
        compile "org.springframework.security:spring-security-config:$springSecurityVersion"
    }
}

project('spring-nanotrader-web') {
    apply plugin: 'war'
    description = 'Spring Nanotrader Web'

    dependencies {
        compile "org.springframework.cloud:spring-cloud-spring-service-connector:$springCloudVersion"
        compile "org.springframework.cloud:spring-cloud-cloudfoundry-connector:$springCloudVersion"
        compile "org.springframework:spring-web:$springVersion"
    }
}

project('spring-nanotrader-asynch-services') {
    apply plugin: 'war'
    description = 'Spring Nanotrader Asynch Services'

    dependencies {
        testCompile project(':spring-nanotrader-data').sourceSets.test.output
        compile project(":spring-nanotrader-service-support")
        compile "org.springframework.integration:spring-integration-amqp:$amqpVersion"
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.4'
}